<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Key Generator</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin:0; height:100vh;
    display:flex; flex-direction:column;
    justify-content:center; align-items:center;
    background: linear-gradient(135deg,#1e3c72,#2a5298); color:#fff;
}
h1 { font-size:2em; margin:20px 0; text-shadow:0 0 10px #fff; }
button {
    padding:10px 20px; font-size:16px; cursor:pointer;
    border:none; border-radius:10px; margin:5px; color:#fff; transition:0.3s;
}
#genKey { background: linear-gradient(45deg,#ff416c,#ff4b2b); }
#genKey:hover { transform:scale(1.05); box-shadow:0 8px 20px rgba(0,0,0,0.4); }
#copyKey { display:none; background: linear-gradient(45deg,#1fa2ff,#12d8fa); }
#copyKey:hover { transform:scale(1.05); box-shadow:0 8px 20px rgba(0,0,0,0.4); }
#showKey {
    margin-top:20px; font-size:18px; padding:15px; border-radius:10px;
    background: rgba(255,255,255,0.1); text-align:center; box-shadow:0 5px 15px rgba(0,0,0,0.2);
    min-width:250px; word-wrap:break-word;
}
@media screen and (max-width:600px){ button, #showKey { width:90%; } }
</style>
</head>
<body>
<h1>Key Generator</h1>
<button id="genKey">Tạo Key</button>
<button id="copyKey">Sao chép Key</button>
<p id="showKey"></p>

<script>
// Tạo deviceID duy nhất
if(!localStorage.getItem("deviceID")){
    localStorage.setItem("deviceID","dev"+Math.floor(Math.random()*1e8))
}
let deviceID = localStorage.getItem("deviceID")

// Hàm hash đơn giản nhưng khó đoán
function hash16(str){
    let hash=0
    for(let i=0;i<str.length;i++){
        hash = (hash<<5)-hash+str.charCodeAt(i)
        hash |=0
    }
    return Math.abs(hash).toString(16).slice(0,16)
}

// Tạo key dựa trên device + date
function generateKey(){
    let now = new Date()
    let today = now.getFullYear()+"-"+(now.getMonth()+1)+"-"+now.getDate()
    return hash16(deviceID+today)
}

document.getElementById('genKey').onclick = function(){
    let key = generateKey()
    let expire = new Date()
    expire.setHours(expire.getHours()+24)
    localStorage.setItem("myKey", key)
    localStorage.setItem("myKeyExpire", expire.toISOString())
    document.getElementById('showKey').innerText = `Key: ${key}\nHết hạn: ${expire.toLocaleString()}`
    document.getElementById('copyKey').style.display='inline-block'
}

document.getElementById('copyKey').onclick = function(){
    let key = localStorage.getItem("myKey")
    if(key){ navigator.clipboard.writeText(key); alert("Key đã sao chép!"); }
    else alert("Chưa tạo key!")
}
</script>
</body>
</html>
