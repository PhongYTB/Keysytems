<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Key</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #111;
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
}
.box {
  background: #1c1c1c;
  padding: 20px;
  border-radius: 8px;
  text-align: center;
  width: 300px;
}
.code {
  margin: 15px 0;
  padding: 10px;
  background: #000;
  border-radius: 5px;
  user-select: none;
}
button {
  padding: 10px;
  width: 100%;
  border: none;
  border-radius: 5px;
  background: #00c853;
  color: #000;
  font-size: 16px;
}
</style>
</head>
<body>

<div class="box" id="main">
  <div>You code is</div>
  <div class="code" id="code">Loading</div>
  <button onclick="copyKey()">Copy</button>
</div>

<script>
if (sessionStorage.getItem("used")) {
  document.body.innerHTML = "<div style='color:white'>Vui lòng vượt lại link mới</div>";
  setTimeout(() => {
    location.href = "https://phongytb.github.io/Mission/";
  }, 3000);
}

fetch("keys.json")
.then(res => res.json())
.then(data => {
  const keys = data.keys;
  const randomKey = keys[Math.floor(Math.random() * keys.length)];
  document.getElementById("code").innerText = randomKey;
});

function copyKey() {
  const text = document.getElementById("code").innerText;
  navigator.clipboard.writeText(text);
  sessionStorage.setItem("used", "1");

  history.replaceState(null, "", " ");
  window.open("", "_self");
  window.close();

  setTimeout(() => {
    location.href = "about:blank";
  }, 100);
}
</script>

</body>
</html>
