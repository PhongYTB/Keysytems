<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Key</title>
<style>
body {
  margin: 0;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: #111;
  color: #fff;
  font-family: Arial;
}
.box {
  background: #1c1c1c;
  padding: 20px;
  border-radius: 8px;
  text-align: center;
  width: 280px;
}
.code {
  margin: 15px 0;
  padding: 10px;
  background: #000;
  border-radius: 5px;
  user-select: none;
}
button {
  width: 100%;
  padding: 10px;
  border: none;
  border-radius: 5px;
  background: #00c853;
  color: #000;
  font-size: 15px;
}
</style>
</head>
<body>

<div class="box">
  <div>You code is</div>
  <div class="code" id="code">Loading</div>
  <button onclick="copyKey()">Copy</button>
</div>

<script>
history.replaceState(null, "", location.pathname)

fetch("keys.json")
.then(r => r.json())
.then(d => {
  const k = d.keys
  document.getElementById("code").innerText = k[Math.floor(Math.random() * k.length)]
})

function copyKey() {
  const key = document.getElementById("code").innerText
  navigator.clipboard.writeText(key)

  history.replaceState(null, "", "https://google.com")
  location.replace("https://google.com")
}

window.onpageshow = function(e) {
  if (e.persisted) {
    window.close()
    location.replace("about:blank")
  }
}

window.onpopstate = function() {
  window.close()
  location.replace("about:blank")
}
</script>

</body>
</html>
