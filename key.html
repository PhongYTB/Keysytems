<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Phong Hub Key System</title>
<style>
body {margin:0;font-family:Arial,sans-serif;background:black;color:white;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;text-align:center;}
h1 {color:red;margin-bottom:20px;}
.key-box {background:red;color:white;padding:15px 20px;border-radius:10px;font-size:18px;margin-bottom:15px;user-select:all;}
.btn {background:white;color:red;padding:12px 25px;border:none;border-radius:10px;font-size:16px;cursor:pointer;margin:5px;}
.btn:hover {background:red;color:white;}
</style>
</head>
<body>
<h1>Phong Hub Key System</h1>
<div id="keyBox" class="key-box">Loading...</div>
<button class="btn" onclick="copyKey()">Copy Key</button>

<script>
// Lấy ID từ URL
let urlParams = new URLSearchParams(window.location.search);
let id = urlParams.get('id');

// Kiểm tra ID tồn tại trong localStorage
const savedTime = localStorage.getItem('key_' + id);
const now = Date.now();

if(!id || (savedTime && now - savedTime > 90*1000)){
    document.body.innerHTML = "<h1>Anti Cheat from Phong</h1>";
} else {
    // Lưu thời gian hiện tại nếu chưa có
    if(!savedTime) localStorage.setItem('key_' + id, now);

    // Load keys từ keys.json
    fetch('keys.json')
    .then(res => res.json())
    .then(data => {
        const keys = data.keys;
        const key = keys[Math.floor(Math.random() * keys.length)];
        document.getElementById('keyBox').innerText = key;
    })
    .catch(() => {
        document.getElementById('keyBox').innerText = "Error loading keys!";
    });

    // Copy key
    function copyKey(){
        const key = document.getElementById('keyBox').innerText;
        navigator.clipboard.writeText(key).then(() => alert('Copied: '+key));
    }

    // Xoá key/localStorage sau 1 phút 30 giây
    setTimeout(() => {
        localStorage.removeItem('key_' + id);
        document.body.innerHTML = "<h1>Anti Cheat from Phong</h1>";
    }, 90*1000);
}
</script>
</body>
</html>
