<!DOCTYPE html>
<html>
<head>
<meta charset="UTF8">
<title>Phong Hub Key System</title>
<style>
  body {
    margin: 0;
    padding: 0;
    background: black;
    color: white;
    font-family: Arial;
    text-align: center;
  }
  .box {
    margin-top: 120px;
    background: #1a1a1a;
    padding: 20px;
    border-radius: 8px;
    display: inline-block;
    width: 300px;
  }
  button {
    padding: 10px 18px;
    border: none;
    border-radius: 6px;
    background: red;
    color: white;
    font-size: 15px;
  }
</style>
</head>
<body>

<div class="box">
  <h2>Phong Hub Key</h2>
  <div id="status">Đang kiểm tra…</div>
  <div id="keyBox" style="margin-top:20px; display:none;">
    <p id="keyText"></p>
    <button onclick="copyKey()">Copy</button>
  </div>
</div>

<script>

// reset sạch dữ liệu key mỗi lần mở
localStorage.removeItem("lastKey");

// lấy checkpointTime
const savedTime = localStorage.getItem("checkpointTime");

// nếu không có checkpoint → anti cheat
if(!savedTime){
    document.getElementById("status").innerText = "Anti cheat from Phong";
} else {
    const now = Date.now();
    const diff = now - Number(savedTime);

    // quá 60s → anti cheat
    if(diff > 60000){
        document.getElementById("status").innerText = "Anti cheat from Phong";
    } else {
        loadKey();
    }
}

// load key ngẫu nhiên từ keys.json
function loadKey(){
    fetch("keys.json")
      .then(r => r.json())
      .then(list => {
          const k = list[Math.floor(Math.random() * list.length)];
          localStorage.setItem("lastKey", k);
          document.getElementById("status").innerText = "Key của bạn";
          document.getElementById("keyText").innerText = k;
          document.getElementById("keyBox").style.display = "block";
      });
}

function copyKey(){
    const k = document.getElementById("keyText").innerText;
    navigator.clipboard.writeText(k);
}

</script>

</body>
</html>
